// https://github.com/farzher/fuzzysort v3.0.0
((r,e)=>{"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():r.fuzzysort=e()})(this,r=>{"use strict";var f=r=>{var e=s(r="string"!=typeof r?"":r);return H(r,{t:e.i,o:e.v,u:e.l})};class t{get["indexes"](){return this.p.slice(0,this.p.h).sort((r,e)=>r-e)}set["indexes"](r){return this.p=r}["highlight"](r,e){for(var[r,f="<b>",t="</b>"]=[this,r,e],i="function"==typeof f?f:void 0,o=r.target,a=o.length,n=r.indexes,v="",s=0,u=0,l=!1,c=[],d=0;d<a;++d){var b=o[d];if(n[u]===d){if(++u,l||(l=!0,i?(c.push(v),v=""):v+=f),u===n.length){i?(c.push(i(v+=b,s++)),v="",c.push(o.substr(d+1))):v+=b+t+o.substr(d+1);break}}else l&&(l=!1,i?(c.push(i(v,s++)),v=""):v+=t);v+=b}return i?c:v}get["score"](){return o(this.g)}set["score"](r){this.g=I(r)}}class G extends Array{get["score"](){return o(this.g)}set["score"](r){this.g=I(r)}}var a,n,e,i,H=(r,e)=>{var f=new t;return f.target=r,f.obj=e.obj??Z,f.g=e.g??X,f.p=e.p??[],f.t=e.t??"",f.o=e.o??Z,f._=e._??Z,f.u=e.u??0,f},o=r=>r===X?0:1<r?r:Math.E**(-2*((1-r)**.04307-1)),I=r=>0===r?X:1<r?r:1-Math.pow(Math.log(r)/-2+1,1/.04307),v=r=>{r=(r="string"!=typeof r?"":r).trim();var e=s(r),f=[];if(e.k)for(var t,i=r.split(/\s+/),i=[...new Set(i)],o=0;o<i.length;o++)""!==i[o]&&(t=s(i[o]),f.push({v:t.v,i:i[o].toLowerCase(),k:!1}));return{v:e.v,i:e.i,k:e.k,l:e.l,S:f}},J=r=>{var e;return 999<r.length?f(r):(void 0===(e=u.get(r))&&(e=f(r),u.set(r,e)),e)},K=r=>{var e;return 999<r.length?v(r):(void 0===(e=l.get(r))&&(e=v(r),l.set(r,e)),e)},N=(r,e,f=!1,t=!1)=>{if(!1===f&&r.k)return j(r,e,t);for(var f=r.i,i=r.v,o=i[0],a=e.o,n=i.length,v=a.length,s=0,u=0,l=0;;){if(o===a[u]){if(x[l++]=u,++s===n)break;o=i[s]}if(v<=++u)return Z}var s=0,c=!1,d=0,b=e._,p=(b===Z&&(b=e._=m(e.target)),u=0===x[0]?0:b[x[0]-1],0);if(u!==v)for(;;)if(v<=u){if(s<=0)break;if(200<++p)break;--s;var h=C[--d],u=b[h]}else if(i[s]===a[u]){if(C[d++]=u,++s===n){c=!0;break}++u}else u=b[u];var w=n<=1?-1:e.t.indexOf(f,x[0]),g=!!~w,y=g&&(0===w||e._[w-1]===w);if(g&&!y)for(var _=0;_<b.length;_=b[_])if(!(_<=w)){for(var k=0;k<n&&i[k]===e.o[_+k];k++);if(k===n){w=_,y=!0;break}}t=r=>{for(var e=0,f=0,t=1;t<n;++t)r[t]-r[t-1]!=1&&(e-=r[t],++f);if(e-=(12+(r[n-1]-r[0]-(n-1)))*f,0!==r[0]&&(e-=r[0]*r[0]*.2),c){for(var i=1,t=b[0];t<v;t=b[t])++i;24<i&&(e*=10*(i-24))}else e*=1e3;return e-=(v-n)/2,g&&(e/=1+n*n*1),y&&(e/=1+n*n*1),e-=(v-n)/2};if(c)if(y){for(_=0;_<n;++_)x[_]=w+_;S=x,M=t(x)}else S=C,M=t(C);else{if(g)for(var _=0;_<n;++_)x[_]=w+_;var S,M=t(S=x)}e.g=M;for(_=0;_<n;++_)e.p[_]=S[_];return e.p.h=n,e},j=(r,e,f)=>{for(var t=new Set,i=0,o=Z,a=0,n=r.S,v=n.length,s=0,u=()=>{for(let r=s-1;0<=r;r--)e._[k[2*r+0]]=k[2*r+1]},l=!1,c=0;c<v;++c){P[c]=X;var d=n[c],o=N(d,e);if(f){if(o===Z)continue;l=!0}else if(o===Z)return u(),Z;if(!(c===v-1)){var b=o.p,p=!0;for(let r=0;r<b.h-1;r++)if(b[r+1]-b[r]!=1){p=!1;break}if(p){var h=b[b.h-1]+1,w=e._[h-1];for(let r=h-1;0<=r&&w===e._[r];r--)e._[r]=h,k[2*s+0]=r,k[2*s+1]=w,s++}}i+=o.g/v,P[c]=o.g/v,o.p[0]<a&&(i-=2*(a-o.p[0]));for(var a=o.p[0],g=0;g<o.p.h;++g)t.add(o.p[g])}if(f&&!l)return Z;u();var y=N(r,e,!0);if(y!==Z&&y.g>i){if(f)for(c=0;c<v;++c)P[c]=y.g/v;return y}(o=f?e:o).g=i;var _,c=0;for(_ of t)o.p[c++]=_;return o.p.h=c,o},s=r=>{for(var e=r.length,f=r.toLowerCase(),t=[],i=0,o=!1,a=0;a<e;++a){var n=t[a]=f.charCodeAt(a);32===n?o=!0:i|=1<<(97<=n&&n<=122?n-97:48<=n&&n<=57?26:n<=127?30:31)}return{v:t,l:i,k:o,i:f}},m=r=>{for(var e=r.length,f=(r=>{for(var e=r.length,f=[],t=0,i=!1,o=!1,a=0;a<e;++a){var n=r.charCodeAt(a),v=65<=n&&n<=90,n=v||97<=n&&n<=122||48<=n&&n<=57,s=v&&!i||!o||!n,i=v,o=n;s&&(f[t++]=a)}return f})(r),t=[],i=f[0],o=0,a=0;a<e;++a)a<i?t[a]=i:(i=f[++o],t[a]=void 0===i?e:i);return t},u=new Map,l=new Map,x=[],C=[],k=[],O=[],P=[],Q=[],R=[],T=f(""),U=(r,e)=>{var f=r[e];if(void 0!==f)return f;if("function"==typeof e)return e(r);for(var t=e,i=(t=Array.isArray(e)?t:e.split(".")).length,o=-1;r&&++o<i;)r=r[t[o]];return r},V=r=>"object"==typeof r&&"number"==typeof r.u,W=1/0,X=-W,Y=[],Z=null,$=(a=[],n=Y.total=0,i=r=>{for(var e=a[i=0],f=1;f<n;){var t=f+1,i=f;t<n&&a[t].g<a[f].g&&(i=t),a[i-1>>1]=a[i],f=1+(i<<1)}for(var o=i-1>>1;0<i&&e.g<a[o].g;o=(i=o)-1>>1)a[i]=a[o];a[i]=e},(e={}).add=r=>{var e=n;a[n++]=r;for(var f=e-1>>1;0<e&&r.g<a[f].g;f=(e=f)-1>>1)a[e]=a[f];a[e]=r},e.M=r=>{var e;if(0!==n)return e=a[0],a[0]=a[--n],i(),e},e.j=r=>{if(0!==n)return a[0]},e.m=r=>{a[0]=r,i()},e);return{single:(r,e)=>{var f;return!r||!e||(r=K(r),V(e)||(e=J(e)),((f=r.l)&e.u)!==f)?Z:N(r,e)},go:(r,e,f)=>{if(!r)if(f?.all){var t=e;var i=f;var o=[],a=(o.total=t.length,i?.limit||W);if(i?.key)for(var n=0;n<t.length;n++){var v=t[n];var s=U(v,i.key);if(s==Z)continue;if(!V(s))s=J(s);var u=H(s.target,{g:s.g,obj:s.obj});o.push(u);if(o.length>=a)return o}else if(i?.keys)for(n=0;n<t.length;n++){v=t[n];var l=new G(i.keys.length);for(var c=i.keys.length-1;c>=0;--c){s=U(v,i.keys[c]);if(!s){l[c]=T;continue}if(!V(s))s=J(s);s.g=X;s.p.h=0;l[c]=s}l.obj=v;l.g=X;o.push(l);if(o.length>=a)return o}else for(n=0;n<t.length;n++){s=t[n];if(s==Z)continue;if(!V(s))s=J(s);s.g=X;s.p.h=0;o.push(s);if(o.length>=a)return o}return o;return}else return Y;var d=K(r),b=d.l,p=d.k,h=I(f?.threshold||0),w=f?.limit||W,g=0,y=0,_=e.length;function k(r){g<w?($.add(r),++g):(++y,r.g>$.j().g&&$.m(r))}if(f?.key)for(var S=f.key,M=0;M<_;++M){var j=e[M];!(D=U(j,S))||(b&(D=V(D)?D:J(D)).u)!==b||(E=N(d,D))===Z||E.g<h||k(H(E.target,{g:E.g,p:E.p,obj:j}))}else if(f?.keys){var m=f.keys,x=m.length;r:for(M=0;M<_;++M){for(var j=e[M],C=0,A=0;A<x;++A){S=m[A];(D=U(j,S))?(V(D)||(D=J(D)),C|=(Q[A]=D).u):Q[A]=T}if((b&C)===b){if(p)for(let r=0;r<d.S.length;r++)O[r]=X;for(A=0;A<x;++A)if((D=Q[A])!==T&&(R[A]=N(d,D,!1,p),R[A]===Z&&(D.g=X,D.p.h=0,R[A]=D),p)&&R[A])for(let r=0;r<d.S.length;r++)-1e3<P[r]&&O[r]>X&&(B=(O[r]+P[r])/4)>O[r]&&(O[r]=B),P[r]>O[r]&&(O[r]=P[r]);if(p){for(let r=0;r<d.S.length;r++)if(O[r]===X)continue r}else{var L=!1;for(let r=0;r<x;r++)if(R[r].g!==X){L=!0;break}if(!L)continue}var q=new G(x);for(let r=0;r<x;r++)q[r]=R[r];if(p){var z=0;for(let r=0;r<d.S.length;r++)z+=O[r]}else{var B,z=X;for(let r=0;r<x;r++)null!==(E=q[r])&&(-1e3<E.g&&X<z&&z<(B=(z+E.g)/4)&&(z=B),E.g>z)&&(z=E.g)}if(q.obj=j,q.g=z,f?.scoreFn){if(!(z=f.scoreFn(q)))continue;z=I(z),q.g=z}z<h||k(q)}}}else for(var D,E,M=0;M<_;++M)!(D=e[M])||(b&(D=V(D)?D:J(D)).u)!==b||(E=N(d,D))===Z||E.g<h||k(E);if(0===g)return Y;for(var F=new Array(g),M=g-1;0<=M;--M)F[M]=$.M();return F.total=g+y,F},prepare:f,cleanup:()=>{u.clear(),l.clear()}}});